<div class="container flex justify-center mx-auto pt-20">
  <h1 class="text-green-700 text-5xl font-extrabold cursor-default">
    Find Staff
  </h1>
</div>
<br /><br /><br />

<form [formGroup]="myForm" (ngSubmit)="findStaffByName()">
  <div class="max-w-md mx-auto">
    <div
      class="relative flex items-center w-full h-12 rounded-lg focus-within:shadow-lg bg-white overflow-hidden"
    >
      <div class="grid place-items-center h-full w-12 text-gray-300">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-6 w-6"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
          />
        </svg>
      </div>

      <mat-form-field class="example-full-width" appearance="fill">
        <mat-label>Staff name</mat-label>
        <input
          type="text"
          placeholder="Pick one"
          matInput
          formControlName="staffUnique"
          [matAutocomplete]="auto"
        />
        <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete">
          <mat-option
            *ngFor="let option of filteredOptions | async"
            [value]="option"
          >
            {{ option }}
          </mat-option>
        </mat-autocomplete>
      </mat-form-field>

      <button
        (click)="findStaffByName()"
        type="submit"
        class="btn inline-block px-6 py-2 border-2 border-blue-600 text-blue-600 font-medium text-xs leading-tight uppercase rounded hover:bg-black hover:bg-opacity-5 focus:outline-none focus:ring-0 transition duration-150 ease-in-out"
        type="button"
        id="button-addon3"
      >
        Search
      </button>
    </div>
  </div>
</form>

<br /><br />
<hr />
<br /><br />
<div
  class="bg-white shadow-lg rounded-lg overflow-hidden my-4 flex items-center space-x-5 max-w-md mx-auto"
  *ngIf="staffuser != undefined"
>
  <div
    *ngFor="let st of staffuser.data"
    class="md:w-full grid grid-cols-2 px-10 pt-10 lg:flex md:flex sm:flex items-center xl:justify-between flex-wrap md:justify-around sm:justify-around lg:justify-around"
  >
    <img
      class="w-full h-56 object-cover object-center"
      src="https://images.unsplash.com/photo-1517841905240-472988babdf9?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=334&q=80"
      alt="avatar"
    />
    <div class="flex items-center px-6 py-3 bg-gray-900 w-full">
      <h1 class="mx-3 text-white font-semibold text-lg text-justify">
        {{ st.name }}
      </h1>
      <br />
    </div>
    <div class="py-4 px-6 w-full">
      <h1 class="text-2xl font-semibold text-gray-800"></h1>
      <div class="flex flex-row items-center">
        <h1 class="text-blue-500">Department:</h1>
        <h2 class="py-2 text-lg text-gray-700">
          {{ st.department }}
        </h2>
      </div>

      <div class="flex flex-row items-center">
        <h1 class="text-blue-500">Staff ID:</h1>
        <h2 class="py-2 text-lg text-gray-700">
          {{ st.staffID }}
        </h2>
      </div>
      <div class="flex items-center mt-4 text-gray-700">
        <svg class="h-6 w-6 fill-current" viewBox="0 0 512 512">
          <path
            d="M437.332 80H74.668C51.199 80 32 99.198 32 122.667v266.666C32 412.802 51.199 432 74.668 432h362.664C460.801 432 480 412.802 480 389.333V122.667C480 99.198 460.801 80 437.332 80zM432 170.667L256 288 80 170.667V128l176 117.333L432 128v42.667z"
          />
        </svg>
        <a href="#"
          ><h2 class="px-2 text-sm">{{ st.username }}</h2></a
        >
      </div>

      <div class="flex items-center mt-4 text-gray-700">
        <h1 class="text-blue-500">Contact</h1>
        <a href="#"
          ><h2 class="px-2 text-sm">{{ st.phone }}</h2></a
        >
      </div>

      <div
        *ngIf="checkAdmin() || checkOwnId()"
        class="pt-4 flex items-center space-x-4"
      >
        <button
          (click)="editStaff(); save($event)"
          attr.id="{{ st.id }}"
          class="bg-blue-500 flex justify-center items-center w-full text-white px-4 py-3 rounded-md focus:outline-none"
        >
          Edit
        </button>
        <div *ngIf="checkAdmin()">
          <button
            (click)="deleteStaff(); save($event)"
            attr.id="{{ st.id }}"
            class="bg-red-700 flex justify-center items-center w-full text-white px-4 py-3 rounded-md focus:outline-none"
          >
            <svg
              class="w-6 h-6 mr-3"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M6 18L18 6M6 6l12 12"
              ></path>
            </svg>
            Delete
          </button>
        </div>
      </div>
    </div>
    <hr />
    <br /><br /><br />
  </div>
</div>

<div *ngIf="staffuser == undefined && checkAdmin()">
  <div class="table w-full p-2">
    <table class="w-full border">
      <thead>
        <tr class="bg-gray-50 border-b">
          <th
            class="p-2 border-r cursor-pointer text-sm font-thin text-gray-500"
          >
            <div class="flex items-center justify-center">Name</div>
          </th>
          <th
            class="p-2 border-r cursor-pointer text-sm font-thin text-gray-500"
          >
            <div class="flex items-center justify-center">Staff ID</div>
          </th>
          <th
            class="p-2 border-r cursor-pointer text-sm font-thin text-gray-500"
          >
            <div class="flex items-center justify-center">Gender</div>
          </th>
          <th
            class="p-2 border-r cursor-pointer text-sm font-thin text-gray-500"
          >
            <div class="flex items-center justify-center">DOB</div>
          </th>
          <th
            class="p-2 border-r cursor-pointer text-sm font-thin text-gray-500"
          >
            <div class="flex items-center justify-center">Department</div>
          </th>
          <th
            class="p-2 border-r cursor-pointer text-sm font-thin text-gray-500"
          >
            <div class="flex items-center justify-center">Email</div>
          </th>
          <th
            class="p-2 border-r cursor-pointer text-sm font-thin text-gray-500"
          >
            <div class="flex items-center justify-center">Phone</div>
          </th>
          <th
            class="p-2 border-r cursor-pointer text-sm font-thin text-gray-500"
          >
            <div class="flex items-center justify-center">Option</div>
          </th>
        </tr>
      </thead>
      <ng-container
        *ngFor="
          let st of staff.data | paginate: { itemsPerPage: 7, currentPage: p }
        "
      >
        <tbody>
          <tr
            class="bg-gray-100 hover:bg-orange-100 text-center border-b text-sm text-gray-600"
          >
            <td class="p-2 border-r">{{ st.name }}</td>
            <td class="p-2 border-r">{{ st.staffID }}</td>
            <td class="p-2 border-r">{{ st.gender }}</td>
            <td class="p-2 border-r">{{ st.dob }}</td>
            <td class="p-2 border-r">{{ st.department }}</td>
            <td class="p-2 border-r">{{ st.username }}</td>
            <td class="p-2 border-r">{{ st.phone }}</td>

            <td>
              <button
                class="bg-blue-500 p-2 text-white hover:shadow-lg text-xs mx-3 font-medium"
                attr.id="{{ st.id }}"
                (click)="editStaff(); save($event)"
              >
                Edit
              </button>
              <button
                class="bg-red-500 p-2 text-white hover:shadow-lg text-xs mx-3 font-medium"
                attr.id="{{ st.id }}"
                (click)="deleteStaff(); save($event)"
              >
                Delete
              </button>
            </td>
          </tr>
        </tbody>
      </ng-container>
      <div class="mt-5">
        <pagination-controls (pageChange)="p = $event"></pagination-controls>
      </div>
    </table>
  </div>
</div>

<div *ngIf="staffuser == undefined && (checkStudent() || checkStaff())">
  <div class="container flex justify-center mx-auto pt-20">
    <h1 class="text-green-700 text-5xl font-extrabold">Staffs</h1>
  </div>
  <h2
    class="text-3xl text-center text-gray-800 font-extrabold pb-6 sm:w-auto w-auto mx-auto"
  >
    List of the staffs are given below
  </h2>

  <br /><br /><br />
  <div class="md:w-full grid grid-cols-3">
    <div *ngFor="let st of staff.data">
      <div class="w-full bg-gray-50 px-10 pt-10">
        <div class="container mx-auto">
          <div
            role="list"
            aria-label="Behind the scenes People "
            class="lg:flex md:flex sm:flex items-center xl:justify-between flex-wrap md:justify-around sm:justify-around lg:justify-around"
          >
            <div
              role="listitem"
              class="xl:w-full sm:w-3/4 md:w-full relative mt-16 mb-32 sm:mb-24 xl:max-w-sm lg:w-2/5"
            >
              <div class="rounded overflow-hidden shadow-md bg-white">
                <div class="absolute -mt-20 w-full flex justify-center">
                  <div class="h-32 w-32" *ngIf="st.gender == 'Male'">
                    <img
                      src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTL_IbRQvlVj5_heS6MBUBdPrmF7MUJdswsAw&usqp=CAU.jpg"
                      alt="Display Picture of Andres Berlin"
                      role="img"
                      class="rounded-full object-cover h-full w-full shadow-md"
                    />
                  </div>
                  <div class="h-32 w-32" *ngIf="st.gender == 'Female'">
                    <img
                      src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSy_JmafxKbli9Es5QUvL6d-qIdOd5RmExsvA&usqp=CAU.jpeg"
                      alt="Display Picture of Andres Berlin"
                      role="img"
                      class="rounded-full object-cover h-full w-full shadow-md"
                    />
                  </div>
                </div>
                <div class="px-6 mt-16">
                  <h1
                    class="text-orange-800 font-bold text-3xl text-center mb-1"
                  >
                    {{ st.name }}
                  </h1>
                  <div class="text-left text-base pt-3 font-normal">
                    <span class="text-orange-700 font-bold ml-10"
                      >Staff ID:
                    </span>
                    <span
                      class="whitespace-nowrap overflow-hidden text-ellipsis"
                    >
                      {{ st.staffID }}
                    </span>
                  </div>
                  <div class="text-left text-base pt-3 font-normal">
                    <span class="text-orange-700 font-bold ml-10"
                      >Department:
                    </span>
                    <span
                      class="whitespace-nowrap overflow-hidden text-ellipsis"
                    >
                      {{ st.department }}
                    </span>
                  </div>
                  <div class="text-left text-base pt-3 font-normal">
                    <span class="text-orange-700 font-bold ml-10"
                      >E-Mail:
                    </span>
                    <span
                      class="whitespace-nowrap overflow-hidden text-ellipsis"
                    >
                      {{ st.username }}
                    </span>
                  </div>
                  <div class="text-left text-base pt-3 font-normal">
                    <span class="text-orange-700 font-bold ml-10"
                      >Phone Number:
                    </span>
                    <span
                      class="whitespace-nowrap overflow-hidden text-ellipsis"
                    >
                      {{ st.phone }}
                    </span>
                  </div>
                  <div class="text-left text-base pt-3 font-normal">
                    <span class="text-orange-700 font-bold ml-10">DOB: </span>
                    <span
                      class="whitespace-nowrap overflow-hidden text-ellipsis"
                    >
                      {{ st.dob }}
                    </span>
                  </div>

                  <br /><br />
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<router-outlet></router-outlet>
